<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="648px" preserveAspectRatio="none" style="width:1323px;height:648px;" version="1.1" viewBox="0 0 1323 648" width="1323px" zoomAndPan="magnify"><defs><filter height="300%" id="faxnwcf4pq1cl" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#EEEEFF" height="633.4531" style="stroke: #A80036; stroke-width: 1.0;" width="324" x="14" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="109" x="121.5" y="16.0669">VPP Interfaces</text><rect fill="#FFFFFF" filter="url(#faxnwcf4pq1cl)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="69" y="247.9609"/><rect fill="#FFFFFF" filter="url(#faxnwcf4pq1cl)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="232" y="377.4922"/><rect fill="#FFFFFF" filter="url(#faxnwcf4pq1cl)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="613" y="117.4297"/><rect fill="#FFBBBB" filter="url(#faxnwcf4pq1cl)" height="158.6641" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="613" y="306.2266"/><rect fill="#FFFFFF" filter="url(#faxnwcf4pq1cl)" height="314.3281" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="953" y="218.8281"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="74" x2="74" y1="86.2969" y2="551.1563"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="237" x2="237" y1="86.2969" y2="551.1563"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="618" x2="618" y1="86.2969" y2="551.1563"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="957.5" x2="957.5" y1="86.2969" y2="551.1563"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1261.5" x2="1261.5" y1="86.2969" y2="551.1563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="106" x="18" y="82.9951">Interface Model</text><ellipse cx="74" cy="54" fill="#FEFECE" filter="url(#faxnwcf4pq1cl)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="62" x2="86" y1="68" y2="68"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="106" x="18" y="563.1514">Interface Model</text><ellipse cx="74" cy="582.4531" fill="#FEFECE" filter="url(#faxnwcf4pq1cl)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="62" x2="86" y1="596.4531" y2="596.4531"/><rect fill="#FEFECE" filter="url(#faxnwcf4pq1cl)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="150" x="160" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="136" x="167" y="70.9951">Interface Descriptor</text><rect fill="#FEFECE" filter="url(#faxnwcf4pq1cl)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="150" x="160" y="550.1563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="136" x="167" y="570.1514">Interface Descriptor</text><rect fill="#FEFECE" filter="url(#faxnwcf4pq1cl)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="102" x="565" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="88" x="572" y="70.9951">KVScheduler</text><rect fill="#FEFECE" filter="url(#faxnwcf4pq1cl)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="102" x="565" y="550.1563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="88" x="572" y="570.1514">KVScheduler</text><rect fill="#FEFECE" filter="url(#faxnwcf4pq1cl)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="101" x="905.5" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="87" x="912.5" y="70.9951">Orchestrator</text><rect fill="#FEFECE" filter="url(#faxnwcf4pq1cl)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="101" x="905.5" y="550.1563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="87" x="912.5" y="570.1514">Orchestrator</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="83" x="1217.5" y="82.9951">GRPC Client</text><ellipse cx="1262" cy="13" fill="#FEFECE" filter="url(#faxnwcf4pq1cl)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M1262,21 L1262,48 M1249,29 L1275,29 M1262,48 L1249,63 M1262,48 L1275,63 " fill="none" filter="url(#faxnwcf4pq1cl)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="83" x="1217.5" y="563.1514">GRPC Client</text><ellipse cx="1262" cy="576.4531" fill="#FEFECE" filter="url(#faxnwcf4pq1cl)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M1262,584.4531 L1262,611.4531 M1249,592.4531 L1275,592.4531 M1262,611.4531 L1249,626.4531 M1262,611.4531 L1275,626.4531 " fill="none" filter="url(#faxnwcf4pq1cl)" style="stroke: #A80036; stroke-width: 2.0;"/><rect fill="#FFFFFF" filter="url(#faxnwcf4pq1cl)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="69" y="247.9609"/><rect fill="#FFFFFF" filter="url(#faxnwcf4pq1cl)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="232" y="377.4922"/><rect fill="#FFFFFF" filter="url(#faxnwcf4pq1cl)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="613" y="117.4297"/><rect fill="#FFBBBB" filter="url(#faxnwcf4pq1cl)" height="158.6641" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="613" y="306.2266"/><rect fill="#FFFFFF" filter="url(#faxnwcf4pq1cl)" height="314.3281" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="953" y="218.8281"/><polygon fill="#A80036" points="601,113.4297,611,117.4297,601,121.4297,605,117.4297" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="237" x2="607" y1="117.4297" y2="117.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="159" x="340.5" y="112.3638">RegisterKVDescriptor</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="10" x="499.5" y="112.3638">()</text><polygon fill="#A80036" points="248,142.5625,238,146.5625,248,150.5625,244,146.5625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="242" x2="617" y1="146.5625" y2="146.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="15" x="420" y="141.4966">ok</text><rect fill="#EEEEEE" filter="url(#faxnwcf4pq1cl)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1308.5" x="3" y="175.1289"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1311.5" y1="175.1289" y2="175.1289"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1311.5" y1="178.1289" y2="178.1289"/><rect fill="#EEEEEE" filter="url(#faxnwcf4pq1cl)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="510" x="402.25" y="164.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="319" x="408.25" y="180.6294">Resync Transaction #0 (configure interface</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="52" x="732.25" y="180.6294">my-tap</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="110" x="789.25" y="180.6294">through GRPC)</text><polygon fill="#A80036" points="974,214.8281,964,218.8281,974,222.8281,970,218.8281" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="968" x2="1261" y1="218.8281" y2="218.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="82" x="972.5" y="213.7622">Resync Txn</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="139" x="1058.5" y="213.7622">= [configure interface</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="46" x="1201.5" y="213.7622">my-tap</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="1247.5" y="213.7622">]</text><polygon fill="#A80036" points="90,243.9609,80,247.9609,90,251.9609,86,247.9609" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="84" x2="952" y1="247.9609" y2="247.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="53" x="461.5" y="242.895">GetKey</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="514.5" y="242.895">(</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="46" x="519.5" y="242.895">my-tap</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="565.5" y="242.895">)</text><polygon fill="#A80036" points="941,273.0938,951,277.0938,941,281.0938,945,277.0938" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="74" x2="947" y1="277.0938" y2="277.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="43" x="467" y="272.0278">key for</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="46" x="514" y="272.0278">my-tap</text><polygon fill="#A80036" points="634,302.2266,624,306.2266,634,310.2266,630,306.2266" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="628" x2="952" y1="306.2266" y2="306.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="82" x="636.5" y="301.1606">Resync Txn</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="162" x="722.5" y="301.1606">= [apply value (interface)</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="46" x="888.5" y="301.1606">my-tap</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="934.5" y="301.1606">]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="623" x2="665" y1="335.3594" y2="335.3594"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="665" x2="665" y1="335.3594" y2="348.3594"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="624" x2="665" y1="348.3594" y2="348.3594"/><polygon fill="#A80036" points="634,344.3594,624,348.3594,634,352.3594,630,348.3594" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="216" x="630" y="330.2935">plan and execute transaction</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="850" y="330.2935">(</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="86" x="855" y="330.2935">COLLAPSED</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="941" y="330.2935">)</text><polygon fill="#A80036" points="253,373.4922,243,377.4922,253,381.4922,249,377.4922" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="247" x2="612" y1="377.4922" y2="377.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="61" x="305" y="372.4263">Retrieve</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="45" x="370" y="372.4263">values,</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="49" x="419" y="372.4263">Create</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="472" y="372.4263"/><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="46" x="472" y="372.4263">my-tap</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="518" y="372.4263">, etc.</text><polygon fill="#A80036" points="601,402.625,611,406.625,601,410.625,605,406.625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="237" x2="607" y1="406.625" y2="406.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="347" x="251.5" y="401.5591">retrieved values, feedback from CRUD operations, etc.</text><polygon fill="#A80036" points="941,431.7578,951,435.7578,941,439.7578,945,435.7578" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="623" x2="947" y1="435.7578" y2="435.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="148" x="714" y="430.6919">value state updates</text><polygon fill="#A80036" points="941,460.8906,951,464.8906,941,468.8906,945,464.8906" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="618" x2="947" y1="464.8906" y2="464.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="64" x="739.5" y="459.8247">txn error</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="24" x="807.5" y="459.8247">(nil)</text><path d="M531,477.8906 L531,502.8906 L701,502.8906 L701,487.8906 L691,477.8906 L531,477.8906 " fill="#FBFB77" filter="url(#faxnwcf4pq1cl)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M691,477.8906 L691,487.8906 L701,487.8906 L691,477.8906 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><a target="_top" xlink:actuate="onRequest" xlink:href="https://raw.githubusercontent.com/milanlenco/vpp-agent/kvs-docs/docs/kvscheduler/cfd/graph/interface_created.svg?sanitize=true" xlink:show="new" xlink:title="https://raw.githubusercontent.com/milanlenco/vpp-agent/kvs-docs/docs/kvscheduler/cfd/graph/interface_created.svg?sanitize=true" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="149" x="537" y="494.9575">Graph after transaction</text><line style="stroke: #0000FF; stroke-width: 1.0;" x1="537" x2="686" y1="496.9575" y2="496.9575"/></a><polygon fill="#A80036" points="1250,529.1563,1260,533.1563,1250,537.1563,1254,533.1563" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="958" x2="1256" y1="533.1563" y2="533.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="64" x="1064" y="528.0903">txn error</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="24" x="1132" y="528.0903">(nil)</text><!--
@startuml

skinparam ParticipantPadding 20
skinparam BoxPadding 10
skinparam SequenceMessageAlign center

box "VPP Interfaces" #EEEEFF
entity IM as "Interface Model"
participant ID as "Interface Descriptor"
end box
participant KVS as "KVScheduler"
participant ORCH as "Orchestrator"
actor GRPC as "GRPC Client"

ID -> KVS: **RegisterKVDescriptor**()
activate KVS
KVS - -> ID: ok
deactivate KVS

== Resync Transaction #0 (configure interface //my-tap// through GRPC) ==

GRPC -> ORCH: **Resync Txn** = [configure interface //my-tap//]
activate ORCH
ORCH -> IM: **GetKey**(//my-tap//)
activate IM
IM - -> ORCH: key for //my-tap//
deactivate IM
ORCH -> KVS: **Resync Txn** = [apply value (interface) //my-tap//]
activate KVS  #FFBBBB

KVS -> KVS: **plan and execute transaction** (**COLLAPSED**)
KVS -> ID: **Retrieve** values, **Create** //my-tap//, etc.
 activate ID
  ID - -> KVS: retrieved values, feedback from CRUD operations, etc.
 deactivate ID
KVS - -> ORCH: **value state updates**
KVS - -> ORCH: **txn error** (nil)
deactivate KVS

note over KVS: [[https://raw.githubusercontent.com/milanlenco/vpp-agent/kvs-docs/docs/kvscheduler/cfd/graph/interface_created.svg?sanitize=true Graph after transaction]]

ORCH - -> GRPC: **txn error** (nil)
deactivate ORCH

@enduml

PlantUML version 1.2019.01(Sat Feb 09 16:32:04 CET 2019)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_181-8u181-b13-0ubuntu0.16.04.1-b13
Operating System: Linux
OS Version: 4.10.0-28-generic
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>