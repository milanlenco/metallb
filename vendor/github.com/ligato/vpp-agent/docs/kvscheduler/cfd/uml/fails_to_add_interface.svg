<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="2004px" preserveAspectRatio="none" style="width:1117px;height:2004px;" version="1.1" viewBox="0 0 1117 2004" width="1117px" zoomAndPan="magnify"><defs><filter height="300%" id="fg1ji6b96d2uj" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#fg1ji6b96d2uj)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="133" y="330.7891"/><rect fill="#FFFFFF" filter="url(#fg1ji6b96d2uj)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="133" y="515.4531"/><rect fill="#FFFFFF" filter="url(#fg1ji6b96d2uj)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="133" y="615.8516"/><rect fill="#FFFFFF" filter="url(#fg1ji6b96d2uj)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="133" y="716.25"/><rect fill="#FFFFFF" filter="url(#fg1ji6b96d2uj)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="133" y="774.5156"/><rect fill="#FFFFFF" filter="url(#fg1ji6b96d2uj)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="133" y="832.7813"/><rect fill="#FFFFFF" filter="url(#fg1ji6b96d2uj)" height="44.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="133" y="1033.5781"/><rect fill="#FFFFFF" filter="url(#fg1ji6b96d2uj)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="133" y="1416.0391"/><rect fill="#FFFFFF" filter="url(#fg1ji6b96d2uj)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="133" y="1516.4375"/><rect fill="#FFFFFF" filter="url(#fg1ji6b96d2uj)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="133" y="1574.7031"/><rect fill="#FFFFFF" filter="url(#fg1ji6b96d2uj)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="133" y="1632.9688"/><rect fill="#FFFFFF" filter="url(#fg1ji6b96d2uj)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="133" y="1733.3672"/><rect fill="#FFFFFF" filter="url(#fg1ji6b96d2uj)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="532" y="85.7266"/><rect fill="#FFBBBB" filter="url(#fg1ji6b96d2uj)" height="999.9844" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="532" y="259.5234"/><rect fill="#FFBFDD" filter="url(#fg1ji6b96d2uj)" height="98.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="537" y="296.5234"/><rect fill="#FFDDCC" filter="url(#fg1ji6b96d2uj)" height="715.9219" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="537" y="439.0547"/><rect fill="#FFBFDD" filter="url(#fg1ji6b96d2uj)" height="113.6641" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="542" y="999.1797"/><rect fill="#EEEEDD" filter="url(#fg1ji6b96d2uj)" height="515.125" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="532" y="1339.6406"/><rect fill="#FFFFFF" filter="url(#fg1ji6b96d2uj)" height="1064.5156" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="934" y="194.9922"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="138" x2="138" y1="54.5938" y2="1948.1641"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="537" x2="537" y1="54.5938" y2="1948.1641"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="939" x2="939" y1="54.5938" y2="1948.1641"/><rect fill="#FEFECE" filter="url(#fg1ji6b96d2uj)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="216" x="28" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="136" x="66" y="22.9951">Interface Descriptor</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="202" x="35" y="39.292">(Interface Model COLLAPSED)</text><rect fill="#FEFECE" filter="url(#fg1ji6b96d2uj)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="216" x="28" y="1947.1641"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="136" x="66" y="1967.1592">Interface Descriptor</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="202" x="35" y="1983.4561">(Interface Model COLLAPSED)</text><rect fill="#FEFECE" filter="url(#fg1ji6b96d2uj)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="102" x="484" y="19.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="88" x="491" y="39.292">KVScheduler</text><rect fill="#FEFECE" filter="url(#fg1ji6b96d2uj)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="102" x="484" y="1947.1641"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="88" x="491" y="1967.1592">KVScheduler</text><rect fill="#FEFECE" filter="url(#fg1ji6b96d2uj)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="130" x="872" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="87" x="891.5" y="22.9951">Orchestrator</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="116" x="879" y="39.292">(NB COLLAPSED)</text><rect fill="#FEFECE" filter="url(#fg1ji6b96d2uj)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="130" x="872" y="1947.1641"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="87" x="891.5" y="1967.1592">Orchestrator</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="116" x="879" y="1983.4561">(NB COLLAPSED)</text><rect fill="#FFFFFF" filter="url(#fg1ji6b96d2uj)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="133" y="330.7891"/><rect fill="#FFFFFF" filter="url(#fg1ji6b96d2uj)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="133" y="515.4531"/><rect fill="#FFFFFF" filter="url(#fg1ji6b96d2uj)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="133" y="615.8516"/><rect fill="#FFFFFF" filter="url(#fg1ji6b96d2uj)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="133" y="716.25"/><rect fill="#FFFFFF" filter="url(#fg1ji6b96d2uj)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="133" y="774.5156"/><rect fill="#FFFFFF" filter="url(#fg1ji6b96d2uj)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="133" y="832.7813"/><rect fill="#FFFFFF" filter="url(#fg1ji6b96d2uj)" height="44.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="133" y="1033.5781"/><rect fill="#FFFFFF" filter="url(#fg1ji6b96d2uj)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="133" y="1416.0391"/><rect fill="#FFFFFF" filter="url(#fg1ji6b96d2uj)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="133" y="1516.4375"/><rect fill="#FFFFFF" filter="url(#fg1ji6b96d2uj)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="133" y="1574.7031"/><rect fill="#FFFFFF" filter="url(#fg1ji6b96d2uj)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="133" y="1632.9688"/><rect fill="#FFFFFF" filter="url(#fg1ji6b96d2uj)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="133" y="1733.3672"/><rect fill="#FFFFFF" filter="url(#fg1ji6b96d2uj)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="532" y="85.7266"/><rect fill="#FFBBBB" filter="url(#fg1ji6b96d2uj)" height="999.9844" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="532" y="259.5234"/><rect fill="#FFBFDD" filter="url(#fg1ji6b96d2uj)" height="98.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="537" y="296.5234"/><rect fill="#FFDDCC" filter="url(#fg1ji6b96d2uj)" height="715.9219" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="537" y="439.0547"/><rect fill="#FFBFDD" filter="url(#fg1ji6b96d2uj)" height="113.6641" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="542" y="999.1797"/><rect fill="#EEEEDD" filter="url(#fg1ji6b96d2uj)" height="515.125" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="532" y="1339.6406"/><rect fill="#FFFFFF" filter="url(#fg1ji6b96d2uj)" height="1064.5156" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="934" y="194.9922"/><polygon fill="#A80036" points="520,81.7266,530,85.7266,520,89.7266,524,85.7266" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="138" x2="526" y1="85.7266" y2="85.7266"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="159" x="250.5" y="80.6606">RegisterKVDescriptor</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="10" x="409.5" y="80.6606">()</text><polygon fill="#A80036" points="149,110.8594,139,114.8594,149,118.8594,145,114.8594" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="143" x2="536" y1="114.8594" y2="114.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="15" x="330" y="109.7935">ok</text><rect fill="#EEEEEE" filter="url(#fg1ji6b96d2uj)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1102" x="3" y="143.4258"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1105" y1="143.4258" y2="143.4258"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1105" y1="146.4258" y2="146.4258"/><rect fill="#EEEEEE" filter="url(#fg1ji6b96d2uj)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="457" x="325.5" y="132.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="304" x="331.5" y="148.9263">Resync Transaction #0 (fails to configure</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="52" x="640.5" y="148.9263">my-tap</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="72" x="697.5" y="148.9263">interface)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="939" x2="986" y1="182.125" y2="182.125"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="986" x2="986" y1="182.125" y2="195.125"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="945" x2="986" y1="195.125" y2="195.125"/><polygon fill="#A80036" points="955,191.125,945,195.125,955,199.125,951,195.125" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="147" x="951" y="177.0591">start startup resync</text><polygon fill="#A80036" points="553,255.5234,543,259.5234,553,263.5234,549,259.5234" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="547" x2="933" y1="259.5234" y2="259.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="82" x="606.5" y="224.1919">Resync Txn</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="20" x="692.5" y="224.1919">= [</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="65" x="610.5" y="239.3247">- interface</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="46" x="679.5" y="239.3247">my-tap</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="140" x="729.5" y="239.3247">with IP 196.168.1.1/24</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="610.5" y="254.4575">]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="542" x2="589" y1="283.6563" y2="283.6563"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="589" x2="589" y1="283.6563" y2="296.6563"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="548" x2="589" y1="296.6563" y2="296.6563"/><polygon fill="#A80036" points="558,292.6563,548,296.6563,558,300.6563,554,296.6563" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="142" x="554" y="278.5903">start graph refresh</text><polygon fill="#A80036" points="154,326.7891,144,330.7891,154,334.7891,150,330.7891" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="148" x2="536" y1="330.7891" y2="330.7891"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="61" x="304.5" y="325.7231">Retrieve</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="10" x="365.5" y="325.7231">()</text><polygon fill="#A80036" points="525,355.9219,535,359.9219,525,363.9219,529,359.9219" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="138" x2="531" y1="359.9219" y2="359.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="148" x="200.5" y="354.856">retrieved interfaces = [</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="37" x="352.5" y="354.856">local0</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="81" x="393.5" y="354.856">(OBTAINED)]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="547" x2="589" y1="394.0547" y2="394.0547"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="589" x2="589" y1="394.0547" y2="407.0547"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="542" x2="589" y1="407.0547" y2="407.0547"/><polygon fill="#A80036" points="552,403.0547,542,407.0547,552,411.0547,548,407.0547" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="160" x="554" y="388.9888">save refreshed graph</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="542" x2="589" y1="426.1875" y2="426.1875"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="589" x2="589" y1="426.1875" y2="439.1875"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="548" x2="589" y1="439.1875" y2="439.1875"/><polygon fill="#A80036" points="558,435.1875,548,439.1875,558,443.1875,554,439.1875" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="63" x="554" y="421.1216">start txn</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="547" x2="589" y1="473.3203" y2="473.3203"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="589" x2="589" y1="473.3203" y2="486.3203"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="548" x2="589" y1="486.3203" y2="486.3203"/><polygon fill="#A80036" points="558,482.3203,548,486.3203,558,490.3203,554,486.3203" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="37" x="554" y="468.2544">local0</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="106" x="595" y="468.2544">is OBTAINED =&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="138" x="705" y="468.2544">not to be removed</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="61" x="847" y="468.2544">by resync</text><polygon fill="#A80036" points="154,511.4531,144,515.4531,154,519.4531,150,515.4531" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="148" x2="536" y1="515.4531" y2="515.4531"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="87" x="268.5" y="510.3872">KeySelector</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="355.5" y="510.3872">(</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="46" x="360.5" y="510.3872">my-tap</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="406.5" y="510.3872">)</text><polygon fill="#A80036" points="525,540.5859,535,544.5859,525,548.5859,529,544.5859" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="138" x2="531" y1="544.5859" y2="544.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="26" x="324.5" y="539.52">true</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="547" x2="589" y1="573.7188" y2="573.7188"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="589" x2="589" y1="573.7188" y2="586.7188"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="548" x2="589" y1="586.7188" y2="586.7188"/><polygon fill="#A80036" points="558,582.7188,548,586.7188,558,590.7188,554,586.7188" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="48" x="554" y="568.6528">value is</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="83" x="606" y="568.6528">handled by</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="122" x="693" y="568.6528">InterfaceDescriptor</text><polygon fill="#A80036" points="154,611.8516,144,615.8516,154,619.8516,150,615.8516" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="148" x2="536" y1="615.8516" y2="615.8516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="105" x="259.5" y="610.7856">Dependencies</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="364.5" y="610.7856">(</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="46" x="369.5" y="610.7856">my-tap</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="415.5" y="610.7856">)</text><polygon fill="#A80036" points="525,640.9844,535,644.9844,525,648.9844,529,644.9844" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="138" x2="531" y1="644.9844" y2="644.9844"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="161" x="257" y="639.9185">&lt;&lt; no dependencies &gt;&gt;</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="547" x2="589" y1="674.1172" y2="674.1172"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="589" x2="589" y1="674.1172" y2="687.1172"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="548" x2="589" y1="687.1172" y2="687.1172"/><polygon fill="#A80036" points="558,683.1172,548,687.1172,558,691.1172,554,687.1172" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="34" x="554" y="669.0513">value</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="46" x="592" y="669.0513">my-tap</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="10" x="642" y="669.0513">is</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="42" x="656" y="669.0513">ready</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="86" x="702" y="669.0513">to be created</text><polygon fill="#A80036" points="154,712.25,144,716.25,154,720.25,150,716.25" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="148" x2="536" y1="716.25" y2="716.25"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="61" x="281.5" y="711.1841">Validate</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="342.5" y="711.1841">(</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="46" x="347.5" y="711.1841">my-tap</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="393.5" y="711.1841">)</text><polygon fill="#A80036" points="525,741.3828,535,745.3828,525,749.3828,529,745.3828" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="138" x2="531" y1="745.3828" y2="745.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="145" x="265" y="740.3169">ok (valid configuration)</text><polygon fill="#A80036" points="154,770.5156,144,774.5156,154,778.5156,150,774.5156" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="148" x2="536" y1="774.5156" y2="774.5156"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="49" x="287.5" y="769.4497">Create</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="336.5" y="769.4497">(</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="46" x="341.5" y="769.4497">my-tap</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="387.5" y="769.4497">)</text><polygon fill="#A80036" points="525,799.6484,535,803.6484,525,807.6484,529,803.6484" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="138" x2="531" y1="803.6484" y2="803.6484"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="31" x="322" y="798.5825">error</text><line style="stroke: #A80036; stroke-width: 2.0;" x1="129" x2="147" y1="794.6484" y2="812.6484"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="129" x2="147" y1="812.6484" y2="794.6484"/><polygon fill="#A80036" points="154,828.7813,144,832.7813,154,836.7813,150,832.7813" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="148" x2="536" y1="832.7813" y2="832.7813"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="129" x="255" y="827.7153">IsRetriableFailure</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="41" x="384" y="827.7153">(error)</text><polygon fill="#A80036" points="525,857.9141,535,861.9141,525,865.9141,529,861.9141" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="138" x2="531" y1="861.9141" y2="861.9141"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="365" x="155" y="856.8481">true (KVScheduler is allowed to retry the failed operation)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="547" x2="589" y1="891.0469" y2="891.0469"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="589" x2="589" y1="891.0469" y2="904.0469"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="548" x2="589" y1="904.0469" y2="904.0469"/><polygon fill="#A80036" points="558,900.0469,548,904.0469,558,908.0469,554,904.0469" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="161" x="554" y="885.981">set the state of the value</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="46" x="719" y="885.981">my-tap</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="13" x="769" y="885.981">to</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="73" x="786" y="885.981">RETRYING</text><rect fill="#EEEEEE" filter="url(#fg1ji6b96d2uj)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1102" x="3" y="932.6133"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1105" y1="932.6133" y2="932.6133"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1105" y1="935.6133" y2="935.6133"/><rect fill="#EEEEEE" filter="url(#fg1ji6b96d2uj)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="731" x="188.5" y="922.0469"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="712" x="194.5" y="938.1138">Transaction failed, scheduling retry (best-effort mode, not-reverting already executed changes)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="547" x2="594" y1="986.4453" y2="986.4453"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="594" x2="594" y1="986.4453" y2="999.4453"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="553" x2="594" y1="999.4453" y2="999.4453"/><polygon fill="#A80036" points="563,995.4453,553,999.4453,563,1003.4453,559,999.4453" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="57" x="559" y="966.2466">Refresh</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="206" x="620" y="966.2466">the failed value to learn its state</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="268" x="563" y="981.3794">- needed to determine the retry operation</text><polygon fill="#A80036" points="154,1029.5781,144,1033.5781,154,1037.5781,150,1033.5781" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="148" x2="541" y1="1033.5781" y2="1033.5781"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="61" x="307" y="1028.5122">Retrieve</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="10" x="368" y="1028.5122">()</text><polygon fill="#A80036" points="530,1073.8438,540,1077.8438,530,1081.8438,534,1077.8438" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="138" x2="536" y1="1077.8438" y2="1077.8438"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="148" x="201" y="1057.645">retrieved interfaces = [</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="37" x="353" y="1057.645">local0</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="81" x="394" y="1057.645">(OBTAINED)]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="190.5" y="1072.7778">(</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="46" x="195.5" y="1072.7778">my-tap</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="178" x="245.5" y="1072.7778">not configured =&gt; retry ==</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="61" x="427.5" y="1072.7778">Create()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="488.5" y="1072.7778">)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="552" x2="594" y1="1111.9766" y2="1111.9766"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="594" x2="594" y1="1111.9766" y2="1124.9766"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="547" x2="594" y1="1124.9766" y2="1124.9766"/><polygon fill="#A80036" points="557,1120.9766,547,1124.9766,557,1128.9766,553,1124.9766" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="163" x="559" y="1106.9106">save refreshed values</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="547" x2="589" y1="1154.1094" y2="1154.1094"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="589" x2="589" y1="1154.1094" y2="1167.1094"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="542" x2="589" y1="1167.1094" y2="1167.1094"/><polygon fill="#A80036" points="552,1163.1094,542,1167.1094,552,1171.1094,548,1167.1094" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="167" x="554" y="1149.0435">finalize and record txn</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="154" x="725" y="1149.0435">(together with the error)</text><path d="M450,1175.1094 L450,1200.1094 L620,1200.1094 L620,1185.1094 L610,1175.1094 L450,1175.1094 " fill="#FBFB77" filter="url(#fg1ji6b96d2uj)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M610,1175.1094 L610,1185.1094 L620,1185.1094 L610,1175.1094 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><a target="_top" xlink:actuate="onRequest" xlink:href="https://raw.githubusercontent.com/milanlenco/vpp-agent/kvs-docs/docs/kvscheduler/cfd/graph/interface_retrying.svg?sanitize=true" xlink:show="new" xlink:title="https://raw.githubusercontent.com/milanlenco/vpp-agent/kvs-docs/docs/kvscheduler/cfd/graph/interface_retrying.svg?sanitize=true" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="149" x="456" y="1192.1763">Graph after transaction</text><line style="stroke: #0000FF; stroke-width: 1.0;" x1="456" x2="605" y1="1194.1763" y2="1194.1763"/></a><polygon fill="#A80036" points="922,1226.375,932,1230.375,922,1234.375,926,1230.375" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="542" x2="928" y1="1230.375" y2="1230.375"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="148" x="664" y="1225.3091">value state updates</text><polygon fill="#A80036" points="927,1255.5078,937,1259.5078,927,1263.5078,931,1259.5078" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="537" x2="933" y1="1259.5078" y2="1259.5078"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="64" x="677.5" y="1254.4419">txn error</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="53" x="745.5" y="1254.4419">(non-nil)</text><rect fill="#EEEEEE" filter="url(#fg1ji6b96d2uj)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1102" x="3" y="1288.0742"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1105" y1="1288.0742" y2="1288.0742"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1105" y1="1291.0742" y2="1291.0742"/><rect fill="#EEEEEE" filter="url(#fg1ji6b96d2uj)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="424" x="342" y="1277.5078"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="271" x="348" y="1293.5747">Retry Transaction #1 (re-try to apply</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="52" x="624" y="1293.5747">my-tap</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="72" x="681" y="1293.5747">interface)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="537" x2="584" y1="1326.7734" y2="1326.7734"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="584" x2="584" y1="1326.7734" y2="1339.7734"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="543" x2="584" y1="1339.7734" y2="1339.7734"/><polygon fill="#A80036" points="553,1335.7734,543,1339.7734,553,1343.7734,549,1339.7734" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="128" x="549" y="1321.7075">trigger Re-try txn</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="17" x="681" y="1321.7075">for</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="46" x="702" y="1321.7075">my-tap</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="182" x="752" y="1321.7075">(after configured time delay)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="542" x2="584" y1="1373.9063" y2="1373.9063"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="584" x2="584" y1="1373.9063" y2="1386.9063"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="543" x2="584" y1="1386.9063" y2="1386.9063"/><polygon fill="#A80036" points="553,1382.9063,543,1386.9063,553,1390.9063,549,1386.9063" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="549" y="1368.8403">(</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="53" x="554" y="1368.8403">cached</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="43" x="607" y="1368.8403">) value</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="46" x="654" y="1368.8403">my-tap</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="10" x="704" y="1368.8403">is</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="83" x="718" y="1368.8403">handled by</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="122" x="805" y="1368.8403">InterfaceDescriptor</text><polygon fill="#A80036" points="154,1412.0391,144,1416.0391,154,1420.0391,150,1416.0391" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="148" x2="531" y1="1416.0391" y2="1416.0391"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="105" x="257" y="1410.9731">Dependencies</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="362" y="1410.9731">(</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="46" x="367" y="1410.9731">my-tap</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="413" y="1410.9731">)</text><polygon fill="#A80036" points="520,1441.1719,530,1445.1719,520,1449.1719,524,1445.1719" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="138" x2="526" y1="1445.1719" y2="1445.1719"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="161" x="254.5" y="1440.106">&lt;&lt; no dependencies &gt;&gt;</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="542" x2="584" y1="1474.3047" y2="1474.3047"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="584" x2="584" y1="1474.3047" y2="1487.3047"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="543" x2="584" y1="1487.3047" y2="1487.3047"/><polygon fill="#A80036" points="553,1483.3047,543,1487.3047,553,1491.3047,549,1487.3047" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="34" x="549" y="1469.2388">value</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="46" x="587" y="1469.2388">my-tap</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="10" x="637" y="1469.2388">is</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="42" x="651" y="1469.2388">ready</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="86" x="697" y="1469.2388">to be created</text><polygon fill="#A80036" points="154,1512.4375,144,1516.4375,154,1520.4375,150,1516.4375" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="148" x2="531" y1="1516.4375" y2="1516.4375"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="61" x="279" y="1511.3716">Validate</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="340" y="1511.3716">(</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="46" x="345" y="1511.3716">my-tap</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="391" y="1511.3716">)</text><polygon fill="#A80036" points="520,1541.5703,530,1545.5703,520,1549.5703,524,1545.5703" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="138" x2="526" y1="1545.5703" y2="1545.5703"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="145" x="262.5" y="1540.5044">ok (valid configuration)</text><polygon fill="#A80036" points="154,1570.7031,144,1574.7031,154,1578.7031,150,1574.7031" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="148" x2="531" y1="1574.7031" y2="1574.7031"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="49" x="285" y="1569.6372">Create</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="56" x="334" y="1569.6372">(my-tap)</text><polygon fill="#A80036" points="520,1599.8359,530,1603.8359,520,1607.8359,524,1603.8359" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="138" x2="526" y1="1603.8359" y2="1603.8359"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="24" x="275" y="1598.77">ok (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="91" x="299" y="1598.77">retry helped</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="390" y="1598.77">)</text><polygon fill="#A80036" points="154,1628.9688,144,1632.9688,154,1636.9688,150,1632.9688" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="148" x2="531" y1="1632.9688" y2="1632.9688"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="106" x="256.5" y="1627.9028">DerivedValues</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="362.5" y="1627.9028">(</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="46" x="367.5" y="1627.9028">my-tap</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="413.5" y="1627.9028">)</text><polygon fill="#A80036" points="520,1658.1016,530,1662.1016,520,1666.1016,524,1662.1016" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="138" x2="526" y1="1662.1016" y2="1662.1016"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="117" x="166.5" y="1657.0356">derived-values = [</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="211" x="287.5" y="1657.0356">"address/my-tap/192.168.1.1/24"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="498.5" y="1657.0356">]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="542" x2="584" y1="1691.2344" y2="1691.2344"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="584" x2="584" y1="1691.2344" y2="1704.2344"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="543" x2="584" y1="1704.2344" y2="1704.2344"/><polygon fill="#A80036" points="553,1700.2344,543,1704.2344,553,1708.2344,549,1704.2344" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="118" x="549" y="1686.1685">schedule create</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="17" x="671" y="1686.1685">for</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="211" x="692" y="1686.1685">"address/my-tap/192.168.1.1/24"</text><polygon fill="#A80036" points="154,1729.3672,144,1733.3672,154,1737.3672,150,1733.3672" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="148" x2="531" y1="1733.3672" y2="1733.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="87" x="183.5" y="1728.3013">KeySelector</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="270.5" y="1728.3013">(</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="211" x="275.5" y="1728.3013">"address/my-tap/192.168.1.1/24"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="486.5" y="1728.3013">)</text><polygon fill="#A80036" points="520,1758.5,530,1762.5,520,1766.5,524,1762.5" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="138" x2="526" y1="1762.5" y2="1762.5"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="30" x="320" y="1757.4341">false</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="542" x2="584" y1="1806.7656" y2="1806.7656"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="584" x2="584" y1="1806.7656" y2="1819.7656"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="543" x2="584" y1="1819.7656" y2="1819.7656"/><polygon fill="#A80036" points="553,1815.7656,543,1819.7656,553,1823.7656,549,1819.7656" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="211" x="549" y="1786.5669">"address/my-tap/192.168.1.1/24"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="10" x="764" y="1786.5669">is</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="64" x="778" y="1786.5669">property</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="846" y="1786.5669"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="169" x="553" y="1801.6997">(without CRUD operations)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="542" x2="584" y1="1853.8984" y2="1853.8984"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="584" x2="584" y1="1853.8984" y2="1866.8984"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="537" x2="584" y1="1866.8984" y2="1866.8984"/><polygon fill="#A80036" points="547,1862.8984,537,1866.8984,547,1870.8984,543,1866.8984" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="167" x="549" y="1848.8325">finalize and record txn</text><path d="M450,1874.8984 L450,1899.8984 L620,1899.8984 L620,1884.8984 L610,1874.8984 L450,1874.8984 " fill="#FBFB77" filter="url(#fg1ji6b96d2uj)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M610,1874.8984 L610,1884.8984 L620,1884.8984 L610,1874.8984 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><a target="_top" xlink:actuate="onRequest" xlink:href="https://raw.githubusercontent.com/milanlenco/vpp-agent/kvs-docs/docs/kvscheduler/cfd/graph/interface_created.svg?sanitize=true" xlink:show="new" xlink:title="https://raw.githubusercontent.com/milanlenco/vpp-agent/kvs-docs/docs/kvscheduler/cfd/graph/interface_created.svg?sanitize=true" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="149" x="456" y="1891.9653">Graph after transaction</text><line style="stroke: #0000FF; stroke-width: 1.0;" x1="456" x2="605" y1="1893.9653" y2="1893.9653"/></a><polygon fill="#A80036" points="927,1926.1641,937,1930.1641,927,1934.1641,931,1930.1641" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="537" x2="933" y1="1930.1641" y2="1930.1641"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="148" x="664" y="1925.0981">value state updates</text><!--
@startuml

skinparam ParticipantPadding 20
skinparam BoxPadding 10
skinparam SequenceMessageAlign center

participant ID as "Interface Descriptor \n(Interface Model COLLAPSED)"
participant KVS as "KVScheduler"
participant ORCH as "Orchestrator \n(NB COLLAPSED)"

ID -> KVS: **RegisterKVDescriptor**()
activate KVS
 KVS - -> ID: ok
deactivate KVS

== Resync Transaction #0 (fails to configure //my-tap// interface) ==

ORCH -> ORCH: **start startup resync**
activate ORCH
ORCH -> KVS: **Resync Txn** = [\l - interface //my-tap// with IP 196.168.1.1/24\l ]

activate KVS  #FFBBBB
KVS -> KVS: **start graph refresh**
 activate KVS  #FFBFDD
  KVS -> ID: **Retrieve**()
   activate ID
    ID - -> KVS: retrieved interfaces = [ //local0// (OBTAINED)]
   deactivate ID
  KVS -> KVS: **save refreshed graph**
 deactivate KVS

KVS -> KVS: **start txn**
 activate KVS  #FFDDCC
  KVS -> KVS: //local0// is OBTAINED => **not to be removed** by resync
 KVS -> ID: **KeySelector**(//my-tap//)
  activate ID
   ID - -> KVS: true
  deactivate ID
 KVS -> KVS: value is **handled by** InterfaceDescriptor
 KVS -> ID: **Dependencies**(//my-tap//)
  activate ID
   ID - -> KVS: << no dependencies >>
  deactivate ID
 KVS -> KVS: value //my-tap// is **ready** to be created
 KVS -> ID: **Validate**(//my-tap//)
  activate ID
   ID - -> KVS: ok (valid configuration)
  deactivate ID
 KVS -> ID: **Create**(//my-tap//)
  activate ID
   ID - -> KVS: error
  destroy ID
 KVS -> ID: **IsRetriableFailure**(error)
  activate ID
   ID - -> KVS: true (KVScheduler is allowed to retry the failed operation)
  deactivate ID
 KVS -> KVS: set the state of the value //my-tap// to **RETRYING**
 
== Transaction failed, scheduling retry (best-effort mode, not-reverting already executed changes) ==
 
 KVS -> KVS: **Refresh** the failed value to learn its state \n - needed to determine the retry operation
  activate KVS  #FFBFDD
   KVS -> ID: **Retrieve**()
    activate ID
     ID - -> KVS: retrieved interfaces = [ //local0// (OBTAINED)] \n (//my-tap// not configured => retry == **Create()**)
    deactivate ID
   KVS -> KVS: **save refreshed values**
  deactivate KVS 
 
 KVS -> KVS: **finalize and record txn** (together with the error)
 deactivate KVS

 note over KVS: [[https://raw.githubusercontent.com/milanlenco/vpp-agent/kvs-docs/docs/kvscheduler/cfd/graph/interface_retrying.svg?sanitize=true Graph after transaction]]

KVS - -> ORCH: **value state updates**
KVS - -> ORCH: **txn error** (non-nil)
deactivate KVS
deactivate ORCH

== Retry Transaction #1 (re-try to apply //my-tap// interface) ==

KVS -> KVS: **trigger Re-try txn** for //my-tap// (after configured time delay)
 activate KVS #EEEEDD
  KVS -> KVS: (**cached**) value //my-tap// is **handled by** InterfaceDescriptor
  KVS -> ID: **Dependencies**(//my-tap//)
   activate ID
    ID - -> KVS: << no dependencies >>
   deactivate ID
  KVS -> KVS: value //my-tap// is **ready** to be created
  KVS -> ID: **Validate**(//my-tap//)
   activate ID
    ID - -> KVS: ok (valid configuration)
   deactivate ID
  KVS -> ID: **Create**(my-tap)
   activate ID
    ID - -> KVS: ok (**retry helped**)
   deactivate ID

  KVS -> ID: **DerivedValues**(//my-tap//)
   activate ID
    ID - -> KVS: derived-values = [ //"address/my-tap/192.168.1.1/24"//]
   deactivate ID
   KVS -> KVS: **schedule create** for //"address/my-tap/192.168.1.1/24"//
   KVS -> ID: **KeySelector**(//"address/my-tap/192.168.1.1/24"//)
   activate ID
    ID - -> KVS: false
   deactivate ID
  KVS -> KVS: //"address/my-tap/192.168.1.1/24"// is **property** \n (without CRUD operations)

  KVS -> KVS: **finalize and record txn**
 deactivate KVS

 note over KVS: [[https://raw.githubusercontent.com/milanlenco/vpp-agent/kvs-docs/docs/kvscheduler/cfd/graph/interface_created.svg?sanitize=true Graph after transaction]]

KVS - -> ORCH: **value state updates**

@enduml

PlantUML version 1.2019.01(Sat Feb 09 16:32:04 CET 2019)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_181-8u181-b13-0ubuntu0.16.04.1-b13
Operating System: Linux
OS Version: 4.10.0-28-generic
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>