<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="2000px" preserveAspectRatio="none" style="width:1500px;height:2000px;" version="1.1" viewBox="0 0 1500 2000" width="1500px" zoomAndPan="magnify"><defs><filter height="300%" id="f8z5s1iial1p4" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f8z5s1iial1p4)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="100" y="302.7891"/><rect fill="#FFFFFF" filter="url(#f8z5s1iial1p4)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="100" y="403.1875"/><rect fill="#FFFFFF" filter="url(#f8z5s1iial1p4)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="100" y="503.5859"/><rect fill="#FFFFFF" filter="url(#f8z5s1iial1p4)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="100" y="561.8516"/><rect fill="#FFFFFF" filter="url(#f8z5s1iial1p4)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="100" y="620.1172"/><rect fill="#FFFFFF" filter="url(#f8z5s1iial1p4)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="100" y="720.5156"/><rect fill="#FFFFFF" filter="url(#f8z5s1iial1p4)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="100" y="894.3125"/><rect fill="#FFFFFF" filter="url(#f8z5s1iial1p4)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="100" y="1738.6328"/><rect fill="#FFFFFF" filter="url(#f8z5s1iial1p4)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="295" y="778.7813"/><rect fill="#FFFFFF" filter="url(#f8z5s1iial1p4)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="295" y="952.5781"/><rect fill="#FFFFFF" filter="url(#f8z5s1iial1p4)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="295" y="1052.9766"/><rect fill="#FFFFFF" filter="url(#f8z5s1iial1p4)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="295" y="1153.375"/><rect fill="#FFFFFF" filter="url(#f8z5s1iial1p4)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="295" y="1211.6406"/><rect fill="#FFFFFF" filter="url(#f8z5s1iial1p4)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="295" y="1370.3047"/><rect fill="#FFBBBB" filter="url(#f8z5s1iial1p4)" height="1693.9063" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="708" y="231.5234"/><rect fill="#FFDDCC" filter="url(#f8z5s1iial1p4)" height="1591.375" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="713" y="268.5234"/><rect fill="#FFBFDD" filter="url(#f8z5s1iial1p4)" height="98.5313" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="718" y="1335.9063"/><rect fill="#CCBBBB" filter="url(#f8z5s1iial1p4)" height="324.1953" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="718" y="1478.5703"/><rect fill="#FFFFFF" filter="url(#f8z5s1iial1p4)" height="1773.7031" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1206" y="151.7266"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="105" x2="105" y1="54.5938" y2="1943.4297"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="300" x2="300" y1="54.5938" y2="1943.4297"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="713" x2="713" y1="54.5938" y2="1943.4297"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1211" x2="1211" y1="54.5938" y2="1943.4297"/><rect fill="#FEFECE" filter="url(#f8z5s1iial1p4)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="150" x="28" y="19.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="136" x="35" y="39.292">Interface Descriptor</text><rect fill="#FEFECE" filter="url(#f8z5s1iial1p4)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="150" x="28" y="1942.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="136" x="35" y="1962.4248">Interface Descriptor</text><rect fill="#FEFECE" filter="url(#f8z5s1iial1p4)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="132" x="232" y="19.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="118" x="239" y="39.292">Route Descriptor</text><rect fill="#FEFECE" filter="url(#f8z5s1iial1p4)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="132" x="232" y="1942.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="118" x="239" y="1962.4248">Route Descriptor</text><rect fill="#FEFECE" filter="url(#f8z5s1iial1p4)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="102" x="660" y="19.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="88" x="667" y="39.292">KVScheduler</text><rect fill="#FEFECE" filter="url(#f8z5s1iial1p4)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="102" x="660" y="1942.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="88" x="667" y="1962.4248">KVScheduler</text><rect fill="#FEFECE" filter="url(#f8z5s1iial1p4)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="130" x="1144" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="87" x="1163.5" y="22.9951">Orchestrator</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="116" x="1151" y="39.292">(NB COLLAPSED)</text><rect fill="#FEFECE" filter="url(#f8z5s1iial1p4)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="130" x="1144" y="1942.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="87" x="1163.5" y="1962.4248">Orchestrator</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="116" x="1151" y="1978.7217">(NB COLLAPSED)</text><rect fill="#FFFFFF" filter="url(#f8z5s1iial1p4)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="100" y="302.7891"/><rect fill="#FFFFFF" filter="url(#f8z5s1iial1p4)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="100" y="403.1875"/><rect fill="#FFFFFF" filter="url(#f8z5s1iial1p4)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="100" y="503.5859"/><rect fill="#FFFFFF" filter="url(#f8z5s1iial1p4)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="100" y="561.8516"/><rect fill="#FFFFFF" filter="url(#f8z5s1iial1p4)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="100" y="620.1172"/><rect fill="#FFFFFF" filter="url(#f8z5s1iial1p4)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="100" y="720.5156"/><rect fill="#FFFFFF" filter="url(#f8z5s1iial1p4)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="100" y="894.3125"/><rect fill="#FFFFFF" filter="url(#f8z5s1iial1p4)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="100" y="1738.6328"/><rect fill="#FFFFFF" filter="url(#f8z5s1iial1p4)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="295" y="778.7813"/><rect fill="#FFFFFF" filter="url(#f8z5s1iial1p4)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="295" y="952.5781"/><rect fill="#FFFFFF" filter="url(#f8z5s1iial1p4)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="295" y="1052.9766"/><rect fill="#FFFFFF" filter="url(#f8z5s1iial1p4)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="295" y="1153.375"/><rect fill="#FFFFFF" filter="url(#f8z5s1iial1p4)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="295" y="1211.6406"/><rect fill="#FFFFFF" filter="url(#f8z5s1iial1p4)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="295" y="1370.3047"/><rect fill="#FFBBBB" filter="url(#f8z5s1iial1p4)" height="1693.9063" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="708" y="231.5234"/><rect fill="#FFDDCC" filter="url(#f8z5s1iial1p4)" height="1591.375" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="713" y="268.5234"/><rect fill="#FFBFDD" filter="url(#f8z5s1iial1p4)" height="98.5313" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="718" y="1335.9063"/><rect fill="#CCBBBB" filter="url(#f8z5s1iial1p4)" height="324.1953" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="718" y="1478.5703"/><rect fill="#FFFFFF" filter="url(#f8z5s1iial1p4)" height="1773.7031" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1206" y="151.7266"/><rect fill="#EEEEEE" filter="url(#f8z5s1iial1p4)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1485" x="3" y="85.1602"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1488" y1="85.1602" y2="85.1602"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1488" y1="88.1602" y2="88.1602"/><rect fill="#EEEEEE" filter="url(#f8z5s1iial1p4)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="630" x="430.5" y="74.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="417" x="436.5" y="90.6606">Data-Change Transaction with Revert enabled (interface</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="52" x="858.5" y="90.6606">my-tap</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="55" x="915.5" y="90.6606">+ route</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="66" x="975.5" y="90.6606">my-route</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="6" x="1041.5" y="90.6606">)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1211" x2="1258" y1="138.9922" y2="138.9922"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1258" x2="1258" y1="138.9922" y2="151.9922"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1217" x2="1258" y1="151.9922" y2="151.9922"/><polygon fill="#A80036" points="1227,147.9922,1217,151.9922,1227,155.9922,1223,151.9922" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="139" x="1223" y="118.7935">trigger transaction</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="111" x="1366" y="118.7935">received from NB</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="129" x="1223" y="133.9263">(localclient or GRPC)</text><polygon fill="#A80036" points="729,227.5234,719,231.5234,729,235.5234,725,231.5234" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="723" x2="1205" y1="231.5234" y2="231.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="280" x="810" y="181.0591">Data-Change Txn with Revert enabled</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="20" x="1094" y="181.0591">= [</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="65" x="814" y="196.1919">- interface</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="46" x="883" y="196.1919">my-tap</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="929" y="196.1919">,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="43" x="814" y="211.3247">- route</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="59" x="861" y="211.3247">my-route</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="924" y="211.3247"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="810" y="226.4575">]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="718" x2="765" y1="255.6563" y2="255.6563"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="765" x2="765" y1="255.6563" y2="268.6563"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="724" x2="765" y1="268.6563" y2="268.6563"/><polygon fill="#A80036" points="734,264.6563,724,268.6563,734,272.6563,730,268.6563" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="63" x="730" y="250.5903">start txn</text><polygon fill="#A80036" points="121,298.7891,111,302.7891,121,306.7891,117,302.7891" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="115" x2="712" y1="302.7891" y2="302.7891"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="87" x="340" y="297.7231">KeySelector</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="427" y="297.7231">(</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="46" x="432" y="297.7231">my-tap</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="478" y="297.7231">)</text><polygon fill="#A80036" points="701,327.9219,711,331.9219,701,335.9219,705,331.9219" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="105" x2="707" y1="331.9219" y2="331.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="26" x="396" y="326.856">true</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="723" x2="765" y1="361.0547" y2="361.0547"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="765" x2="765" y1="361.0547" y2="374.0547"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="724" x2="765" y1="374.0547" y2="374.0547"/><polygon fill="#A80036" points="734,370.0547,724,374.0547,734,378.0547,730,374.0547" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="48" x="730" y="355.9888">value is</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="83" x="782" y="355.9888">handled by</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="122" x="869" y="355.9888">InterfaceDescriptor</text><polygon fill="#A80036" points="121,399.1875,111,403.1875,121,407.1875,117,403.1875" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="115" x2="712" y1="403.1875" y2="403.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="105" x="331" y="398.1216">Dependencies</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="436" y="398.1216">(</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="46" x="441" y="398.1216">my-tap</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="487" y="398.1216">)</text><polygon fill="#A80036" points="701,428.3203,711,432.3203,701,436.3203,705,432.3203" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="105" x2="707" y1="432.3203" y2="432.3203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="161" x="328.5" y="427.2544">&lt;&lt; no dependencies &gt;&gt;</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="723" x2="765" y1="461.4531" y2="461.4531"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="765" x2="765" y1="461.4531" y2="474.4531"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="724" x2="765" y1="474.4531" y2="474.4531"/><polygon fill="#A80036" points="734,470.4531,724,474.4531,734,478.4531,730,474.4531" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="34" x="730" y="456.3872">value</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="46" x="768" y="456.3872">my-tap</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="10" x="818" y="456.3872">is</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="42" x="832" y="456.3872">ready</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="86" x="878" y="456.3872">to be created</text><polygon fill="#A80036" points="121,499.5859,111,503.5859,121,507.5859,117,503.5859" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="115" x2="712" y1="503.5859" y2="503.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="61" x="353" y="498.52">Validate</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="414" y="498.52">(</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="46" x="419" y="498.52">my-tap</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="465" y="498.52">)</text><polygon fill="#A80036" points="701,528.7188,711,532.7188,701,536.7188,705,532.7188" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="105" x2="707" y1="532.7188" y2="532.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="145" x="336.5" y="527.6528">ok (valid configuration)</text><polygon fill="#A80036" points="121,557.8516,111,561.8516,121,565.8516,117,561.8516" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="115" x2="712" y1="561.8516" y2="561.8516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="49" x="359" y="556.7856">Create</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="408" y="556.7856">(</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="46" x="413" y="556.7856">my-tap</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="459" y="556.7856">)</text><polygon fill="#A80036" points="701,586.9844,711,590.9844,701,594.9844,705,590.9844" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="105" x2="707" y1="590.9844" y2="590.9844"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="15" x="401.5" y="585.9185">ok</text><polygon fill="#A80036" points="121,616.1172,111,620.1172,121,624.1172,117,620.1172" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="115" x2="712" y1="620.1172" y2="620.1172"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="106" x="330.5" y="615.0513">DerivedValues</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="436.5" y="615.0513">(</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="46" x="441.5" y="615.0513">my-tap</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="487.5" y="615.0513">)</text><polygon fill="#A80036" points="701,645.25,711,649.25,701,653.25,705,649.25" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="105" x2="707" y1="649.25" y2="649.25"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="117" x="240.5" y="644.1841">derived-values = [</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="211" x="361.5" y="644.1841">"address/my-tap/192.168.1.1/24"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="572.5" y="644.1841">]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="723" x2="765" y1="678.3828" y2="678.3828"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="765" x2="765" y1="678.3828" y2="691.3828"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="724" x2="765" y1="691.3828" y2="691.3828"/><polygon fill="#A80036" points="734,687.3828,724,691.3828,734,695.3828,730,691.3828" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="118" x="730" y="673.3169">schedule create</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="17" x="852" y="673.3169">for</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="211" x="873" y="673.3169">"address/my-tap/192.168.1.1/24"</text><polygon fill="#A80036" points="121,716.5156,111,720.5156,121,724.5156,117,720.5156" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="115" x2="712" y1="720.5156" y2="720.5156"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="87" x="257.5" y="715.4497">KeySelector</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="344.5" y="715.4497">(</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="211" x="349.5" y="715.4497">"address/my-tap/192.168.1.1/24"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="560.5" y="715.4497">)</text><polygon fill="#A80036" points="701,745.6484,711,749.6484,701,753.6484,705,749.6484" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="105" x2="707" y1="749.6484" y2="749.6484"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="30" x="394" y="744.5825">false</text><polygon fill="#A80036" points="316,774.7813,306,778.7813,316,782.7813,312,778.7813" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="310" x2="712" y1="778.7813" y2="778.7813"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="87" x="355" y="773.7153">KeySelector</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="442" y="773.7153">(</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="211" x="447" y="773.7153">"address/my-tap/192.168.1.1/24"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="658" y="773.7153">)</text><polygon fill="#A80036" points="701,803.9141,711,807.9141,701,811.9141,705,807.9141" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="300" x2="707" y1="807.9141" y2="807.9141"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="30" x="491.5" y="802.8481">false</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="723" x2="765" y1="852.1797" y2="852.1797"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="765" x2="765" y1="852.1797" y2="865.1797"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="724" x2="765" y1="865.1797" y2="865.1797"/><polygon fill="#A80036" points="734,861.1797,724,865.1797,734,869.1797,730,865.1797" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="211" x="730" y="831.981">"address/my-tap/192.168.1.1/24"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="10" x="945" y="831.981">is</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="64" x="959" y="831.981">property</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="1027" y="831.981"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="169" x="734" y="847.1138">(without CRUD operations)</text><polygon fill="#A80036" points="121,890.3125,111,894.3125,121,898.3125,117,894.3125" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="115" x2="712" y1="894.3125" y2="894.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="87" x="333.5" y="889.2466">KeySelector</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="420.5" y="889.2466">(</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="59" x="425.5" y="889.2466">my-route</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="484.5" y="889.2466">)</text><polygon fill="#A80036" points="701,919.4453,711,923.4453,701,927.4453,705,923.4453" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="105" x2="707" y1="923.4453" y2="923.4453"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="30" x="394" y="918.3794">false</text><polygon fill="#A80036" points="316,948.5781,306,952.5781,316,956.5781,312,952.5781" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="310" x2="712" y1="952.5781" y2="952.5781"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="87" x="431" y="947.5122">KeySelector</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="518" y="947.5122">(</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="59" x="523" y="947.5122">my-route</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="582" y="947.5122">)</text><polygon fill="#A80036" points="701,977.7109,711,981.7109,701,985.7109,705,981.7109" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="300" x2="707" y1="981.7109" y2="981.7109"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="26" x="493.5" y="976.645">true</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="723" x2="765" y1="1010.8438" y2="1010.8438"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="765" x2="765" y1="1010.8438" y2="1023.8438"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="724" x2="765" y1="1023.8438" y2="1023.8438"/><polygon fill="#A80036" points="734,1019.8438,724,1023.8438,734,1027.8438,730,1023.8438" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="48" x="730" y="1005.7778">value is</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="83" x="782" y="1005.7778">handled by</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="103" x="869" y="1005.7778">RouteDescriptor</text><polygon fill="#A80036" points="316,1048.9766,306,1052.9766,316,1056.9766,312,1052.9766" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="310" x2="712" y1="1052.9766" y2="1052.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="105" x="422" y="1047.9106">Dependencies</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="527" y="1047.9106">(</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="59" x="532" y="1047.9106">my-route</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="591" y="1047.9106">)</text><polygon fill="#A80036" points="701,1078.1094,711,1082.1094,701,1086.1094,705,1082.1094" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="300" x2="707" y1="1082.1094" y2="1082.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="59" x="371" y="1077.0435">my-route</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="434" y="1077.0435"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="88" x="434" y="1077.0435">depends on</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="66" x="526" y="1077.0435">(interface)</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="46" x="596" y="1077.0435">my-tap</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="723" x2="765" y1="1111.2422" y2="1111.2422"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="765" x2="765" y1="1111.2422" y2="1124.2422"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="724" x2="765" y1="1124.2422" y2="1124.2422"/><polygon fill="#A80036" points="734,1120.2422,724,1124.2422,734,1128.2422,730,1124.2422" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="34" x="730" y="1106.1763">value</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="59" x="768" y="1106.1763">my-route</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="10" x="831" y="1106.1763">is</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="42" x="845" y="1106.1763">ready</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="86" x="891" y="1106.1763">to be created</text><polygon fill="#A80036" points="316,1149.375,306,1153.375,316,1157.375,312,1153.375" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="310" x2="712" y1="1153.375" y2="1153.375"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="61" x="444" y="1148.3091">Validate</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="505" y="1148.3091">(</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="59" x="510" y="1148.3091">my-route</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="569" y="1148.3091">)</text><polygon fill="#A80036" points="701,1178.5078,711,1182.5078,701,1186.5078,705,1182.5078" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="300" x2="707" y1="1182.5078" y2="1182.5078"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="145" x="434" y="1177.4419">ok (valid configuration)</text><polygon fill="#A80036" points="316,1207.6406,306,1211.6406,316,1215.6406,312,1211.6406" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="310" x2="712" y1="1211.6406" y2="1211.6406"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="49" x="450" y="1206.5747">Create</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="499" y="1206.5747">(</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="59" x="504" y="1206.5747">my-route</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="563" y="1206.5747">)</text><polygon fill="#A80036" points="701,1236.7734,711,1240.7734,701,1244.7734,705,1240.7734" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="300" x2="707" y1="1240.7734" y2="1240.7734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="31" x="491" y="1235.7075">error</text><line style="stroke: #A80036; stroke-width: 2.0;" x1="291" x2="309" y1="1231.7734" y2="1249.7734"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="291" x2="309" y1="1249.7734" y2="1231.7734"/><rect fill="#EEEEEE" filter="url(#f8z5s1iial1p4)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1485" x="3" y="1269.3398"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1488" y1="1269.3398" y2="1269.3398"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1488" y1="1272.3398" y2="1272.3398"/><rect fill="#EEEEEE" filter="url(#f8z5s1iial1p4)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="405" x="543" y="1258.7734"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="386" x="549" y="1274.8403">Transaction failed, revert already executed changes</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="723" x2="770" y1="1323.1719" y2="1323.1719"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="770" x2="770" y1="1323.1719" y2="1336.1719"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="729" x2="770" y1="1336.1719" y2="1336.1719"/><polygon fill="#A80036" points="739,1332.1719,729,1336.1719,739,1340.1719,735,1336.1719" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="57" x="735" y="1302.9731">Refresh</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="206" x="796" y="1302.9731">the failed value to learn its state</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="276" x="739" y="1318.106">- needed to determine the revert operation</text><polygon fill="#A80036" points="316,1366.3047,306,1370.3047,316,1374.3047,312,1370.3047" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="310" x2="717" y1="1370.3047" y2="1370.3047"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="61" x="476" y="1365.2388">Retrieve</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="10" x="537" y="1365.2388">()</text><polygon fill="#A80036" points="706,1395.4375,716,1399.4375,706,1403.4375,710,1399.4375" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="300" x2="712" y1="1399.4375" y2="1399.4375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="311" x="319.5" y="1394.3716">&lt;&lt; no retrieved routes &gt;&gt; (nothing to revert for</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="59" x="634.5" y="1394.3716">my-route</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="693.5" y="1394.3716">)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="728" x2="770" y1="1433.5703" y2="1433.5703"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="770" x2="770" y1="1433.5703" y2="1446.5703"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="723" x2="770" y1="1446.5703" y2="1446.5703"/><polygon fill="#A80036" points="733,1442.5703,723,1446.5703,733,1450.5703,729,1446.5703" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="163" x="735" y="1428.5044">save refreshed values</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="723" x2="770" y1="1465.7031" y2="1465.7031"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="770" x2="770" y1="1465.7031" y2="1478.7031"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="729" x2="770" y1="1478.7031" y2="1478.7031"/><polygon fill="#A80036" points="739,1474.7031,729,1478.7031,739,1482.7031,735,1478.7031" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="107" x="735" y="1460.6372">undo Create (i.e.</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="48" x="846" y="1460.6372">Delete</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="21" x="894" y="1460.6372">) of</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="46" x="919" y="1460.6372">my-tap</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="56" x="969" y="1460.6372">interface</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="728" x2="770" y1="1512.8359" y2="1512.8359"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="770" x2="770" y1="1512.8359" y2="1525.8359"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="729" x2="770" y1="1525.8359" y2="1525.8359"/><polygon fill="#A80036" points="739,1521.8359,729,1525.8359,739,1529.8359,735,1525.8359" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="735" y="1507.77">(</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="53" x="740" y="1507.77">cached</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="57" x="793" y="1507.77">) value is</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="83" x="854" y="1507.77">handled by</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="122" x="941" y="1507.77">InterfaceDescriptor</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="728" x2="770" y1="1554.9688" y2="1554.9688"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="770" x2="770" y1="1554.9688" y2="1567.9688"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="729" x2="770" y1="1567.9688" y2="1567.9688"/><polygon fill="#A80036" points="739,1563.9688,729,1567.9688,739,1571.9688,735,1567.9688" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="161" x="735" y="1549.9028">remove derived values of</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="46" x="900" y="1549.9028">my-tap</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="33" x="950" y="1549.9028">first (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="211" x="983" y="1549.9028">"address/my-tap/192.168.1.1/24"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="1194" y="1549.9028">)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="728" x2="770" y1="1597.1016" y2="1597.1016"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="770" x2="770" y1="1597.1016" y2="1610.1016"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="729" x2="770" y1="1610.1016" y2="1610.1016"/><polygon fill="#A80036" points="739,1606.1016,729,1610.1016,739,1614.1016,735,1610.1016" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="34" x="735" y="1592.0356">apply</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="60" x="773" y="1592.0356">Delete()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="17" x="837" y="1592.0356">for</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="211" x="858" y="1592.0356">"address/my-tap/192.168.1.1/24"</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="728" x2="770" y1="1654.3672" y2="1654.3672"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="770" x2="770" y1="1654.3672" y2="1667.3672"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="729" x2="770" y1="1667.3672" y2="1667.3672"/><polygon fill="#A80036" points="739,1663.3672,729,1667.3672,739,1671.3672,735,1667.3672" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="735" y="1634.1685">(</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="53" x="740" y="1634.1685">cached</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="793" y="1634.1685">)</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="211" x="802" y="1634.1685">"address/my-tap/192.168.1.1/24"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="10" x="1017" y="1634.1685">is</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="64" x="1031" y="1634.1685">property</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="1099" y="1634.1685"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="209" x="739" y="1649.3013">(no Delete operation to execute)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="728" x2="770" y1="1696.5" y2="1696.5"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="770" x2="770" y1="1696.5" y2="1709.5"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="729" x2="770" y1="1709.5" y2="1709.5"/><polygon fill="#A80036" points="739,1705.5,729,1709.5,739,1713.5,735,1709.5" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="95" x="735" y="1691.4341">removed value</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="211" x="834" y="1691.4341">"address/my-tap/192.168.1.1/24"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="1049" y="1691.4341">from the graph</text><polygon fill="#A80036" points="121,1734.6328,111,1738.6328,121,1742.6328,117,1738.6328" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="115" x2="717" y1="1738.6328" y2="1738.6328"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="48" x="362" y="1733.5669">Delete</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="410" y="1733.5669">(</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="46" x="415" y="1733.5669">my-tap</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="461" y="1733.5669">)</text><polygon fill="#A80036" points="706,1763.7656,716,1767.7656,706,1771.7656,710,1767.7656" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="105" x2="712" y1="1767.7656" y2="1767.7656"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="15" x="404" y="1762.6997">ok</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="728" x2="770" y1="1801.8984" y2="1801.8984"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="770" x2="770" y1="1801.8984" y2="1814.8984"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="723" x2="770" y1="1814.8984" y2="1814.8984"/><polygon fill="#A80036" points="733,1810.8984,723,1814.8984,733,1818.8984,729,1814.8984" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="95" x="735" y="1796.8325">removed value</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="46" x="834" y="1796.8325">my-tap</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="884" y="1796.8325">from the graph</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="723" x2="765" y1="1859.1641" y2="1859.1641"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="765" x2="765" y1="1859.1641" y2="1872.1641"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="718" x2="765" y1="1872.1641" y2="1872.1641"/><polygon fill="#A80036" points="728,1868.1641,718,1872.1641,728,1876.1641,724,1872.1641" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="192" x="730" y="1838.9653">finalize and record txn #1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="926" y="1838.9653"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="240" x="730" y="1854.0981">(reverted - ends with no visible effect)</text><polygon fill="#A80036" points="1194,1892.2969,1204,1896.2969,1194,1900.2969,1198,1896.2969" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="718" x2="1200" y1="1896.2969" y2="1896.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="148" x="888" y="1891.231">value state updates</text><polygon fill="#A80036" points="1199,1921.4297,1209,1925.4297,1199,1929.4297,1203,1925.4297" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="713" x2="1205" y1="1925.4297" y2="1925.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="64" x="901.5" y="1920.3638">txn error</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="53" x="969.5" y="1920.3638">(non-nil)</text><!--
@startuml

skinparam ParticipantPadding 20
skinparam BoxPadding 10
skinparam SequenceMessageAlign center

participant ID as "Interface Descriptor"
participant RD as "Route Descriptor"
participant KVS as "KVScheduler"
participant ORCH as "Orchestrator \n(NB COLLAPSED)"

== Data-Change Transaction with Revert enabled (interface //my-tap// + route //my-route//) ==

ORCH -> ORCH: **trigger transaction** received from NB \n(localclient or GRPC)
activate ORCH
ORCH -> KVS: **Data-Change Txn with Revert enabled** = [\l - interface //my-tap//, \l - route //my-route// \l]
activate KVS  #FFBBBB

KVS -> KVS: **start txn**
 activate KVS  #FFDDCC
  KVS -> ID: **KeySelector**(//my-tap//)
   activate ID
    ID - -> KVS: true
   deactivate ID
  KVS -> KVS: value is **handled by** InterfaceDescriptor
  KVS -> ID: **Dependencies**(//my-tap//)
   activate ID
    ID - -> KVS: << no dependencies >>
   deactivate ID
  KVS -> KVS: value //my-tap// is **ready** to be created
  KVS -> ID: **Validate**(//my-tap//)
  activate ID
   ID - -> KVS: ok (valid configuration)
  deactivate ID
  KVS -> ID: **Create**(//my-tap//)
  activate ID
   ID - -> KVS: ok
  deactivate ID

  KVS -> ID: **DerivedValues**(//my-tap//)
   activate ID
    ID - -> KVS: derived-values = [ //"address/my-tap/192.168.1.1/24"//]
   deactivate ID
   KVS -> KVS: **schedule create** for //"address/my-tap/192.168.1.1/24"//
   KVS -> ID: **KeySelector**(//"address/my-tap/192.168.1.1/24"//)
   activate ID
    ID - -> KVS: false
   deactivate ID
   KVS -> RD: **KeySelector**(//"address/my-tap/192.168.1.1/24"//)
   activate RD
    RD - -> KVS: false
   deactivate RD
  KVS -> KVS: //"address/my-tap/192.168.1.1/24"// is **property** \n (without CRUD operations)

  KVS -> ID: **KeySelector**(//my-route//)
   activate ID
    ID - -> KVS: false
   deactivate ID
  KVS -> RD: **KeySelector**(//my-route//)
   activate RD
    RD - -> KVS: true
   deactivate RD
  KVS -> KVS: value is **handled by** RouteDescriptor
  KVS -> RD: **Dependencies**(//my-route//)
   activate RD
    RD - -> KVS: //my-route// **depends on** (interface) //my-tap//
   deactivate RD
  KVS -> KVS: value //my-route// is **ready** to be created

  KVS -> RD: **Validate**(//my-route//)
   activate RD
    RD - -> KVS: ok (valid configuration)
   deactivate RD
  KVS -> RD: **Create**(//my-route//)
   activate RD
    RD - -> KVS: error
   destroy RD

== Transaction failed, revert already executed changes ==

  KVS -> KVS: **Refresh** the failed value to learn its state \n - needed to determine the revert operation
   activate KVS  #FFBFDD
    KVS -> RD: **Retrieve**()
     activate RD
      RD - -> KVS: << no retrieved routes >> (nothing to revert for //my-route//)
     deactivate RD
    KVS -> KVS: **save refreshed values**
   deactivate KVS

  KVS -> KVS: undo Create (i.e. **Delete**) of //my-tap// interface
   activate KVS #CCBBBB
    KVS -> KVS: (**cached**) value is **handled by** InterfaceDescriptor
    KVS -> KVS: remove derived values of //my-tap// first (//"address/my-tap/192.168.1.1/24"//)
    KVS -> KVS: apply **Delete()** for //"address/my-tap/192.168.1.1/24"//
    KVS -> KVS: (**cached**) //"address/my-tap/192.168.1.1/24"// is **property** \n (no Delete operation to execute)
    KVS -> KVS: removed value //"address/my-tap/192.168.1.1/24"// from the graph
    KVS -> ID: **Delete**(//my-tap//)
     activate ID
      ID - -> KVS: ok
     deactivate ID
    KVS -> KVS: removed value //my-tap// from the graph
   deactivate KVS

  KVS -> KVS: **finalize and record txn #1** \n(reverted - ends with no visible effect)
 deactivate KVS
KVS - -> ORCH: **value state updates**
KVS - -> ORCH: **txn error** (non-nil)
deactivate KVS
deactivate ORCH

@enduml

PlantUML version 1.2019.01(Sat Feb 09 16:32:04 CET 2019)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_181-8u181-b13-0ubuntu0.16.04.1-b13
Operating System: Linux
OS Version: 4.10.0-28-generic
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>